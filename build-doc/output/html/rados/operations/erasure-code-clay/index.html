
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>CLAY code plugin &#8212; Ceph Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/ceph.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="Cache Tiering" href="../cache-tiering/" />
    <link rel="prev" title="SHEC erasure code plugin" href="../erasure-code-shec/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../cache-tiering/" title="Cache Tiering"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../erasure-code-shec/" title="SHEC erasure code plugin"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../" >Ceph Storage Cluster</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../" >Cluster Operations</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../erasure-code/" >Erasure code</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="../erasure-code-profile/" accesskey="U">Erasure code profiles</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">CLAY code plugin</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div id="docubetter" align="right" style="padding: 15px; font-weight: bold;">
    <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <section id="clay-code-plugin">
<h1>CLAY code plugin<a class="headerlink" href="#clay-code-plugin" title="Permalink to this heading">¶</a></h1>
<p>CLAY (short for coupled-layer) codes are erasure codes designed to bring about significant savings
in terms of network bandwidth and disk IO when a failed node/OSD/rack is being repaired. Let:</p>
<blockquote>
<div><p>d = number of OSDs contacted during repair</p>
</div></blockquote>
<p>If <em>jerasure</em> is configured with <em>k=8</em> and <em>m=4</em>, losing one OSD requires
reading from the <em>d=8</em> others to repair. And recovery of say a 1GiB needs
a download of 8 X 1GiB = 8GiB of information.</p>
<p>However, in the case of the <em>clay</em> plugin <em>d</em> is configurable within the limits:</p>
<blockquote>
<div><p>k+1 &lt;= d &lt;= k+m-1</p>
</div></blockquote>
<p>By default, the clay code plugin picks <em>d=k+m-1</em> as it provides the greatest savings in terms
of network bandwidth and disk IO. In the case of the <em>clay</em> plugin configured with
<em>k=8</em>, <em>m=4</em> and <em>d=11</em> when a single OSD fails, d=11 osds are contacted and
250MiB is downloaded from each of them, resulting in a total download of 11 X 250MiB = 2.75GiB
amount of information. More general parameters are provided below. The benefits are substantial
when the repair is carried out for a rack that stores information on the order of
Terabytes.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>plugin</p></th>
<th class="head"><p>total amount of disk IO</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>jerasure,isa</p></td>
<td><p><span class="math notranslate nohighlight">\(k S\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>clay</p></td>
<td><p><span class="math notranslate nohighlight">\(\frac{d S}{d - k + 1} = \frac{(k + m - 1) S}{m}\)</span></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>where <em>S</em> is the amount of data stored on a single OSD undergoing repair. In the table above, we have
used the largest possible value of <em>d</em> as this will result in the smallest amount of data download needed
to achieve recovery from an OSD failure.</p>
<section id="erasure-code-profile-examples">
<h2>Erasure-code profile examples<a class="headerlink" href="#erasure-code-profile-examples" title="Permalink to this heading">¶</a></h2>
<p>An example configuration that can be used to observe reduced bandwidth usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">ceph<span class="w"> </span>osd<span class="w"> </span>erasure-code-profile<span class="w"> </span><span class="nb">set</span><span class="w"> </span>CLAYprofile<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">plugin</span><span class="o">=</span>clay<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">k</span><span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="nv">m</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">d</span><span class="o">=</span><span class="m">5</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>crush-failure-domain<span class="o">=</span>host</span>
<span class="prompt1">ceph<span class="w"> </span>osd<span class="w"> </span>pool<span class="w"> </span>create<span class="w"> </span>claypool<span class="w"> </span>erasure<span class="w"> </span>CLAYprofile</span>
</pre></div></div></section>
<section id="creating-a-clay-profile">
<h2>Creating a clay profile<a class="headerlink" href="#creating-a-clay-profile" title="Permalink to this heading">¶</a></h2>
<p>To create a new clay code profile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>osd<span class="w"> </span>erasure-code-profile<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="o">{</span>name<span class="o">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="nv">plugin</span><span class="o">=</span>clay<span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="nv">k</span><span class="o">={</span>data-chunks<span class="o">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="nv">m</span><span class="o">={</span>coding-chunks<span class="o">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="o">[</span><span class="nv">d</span><span class="o">={</span>helper-chunks<span class="o">}]</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="o">[</span><span class="nv">scalar_mds</span><span class="o">={</span>plugin-name<span class="o">}]</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="o">[</span><span class="nv">technique</span><span class="o">={</span>technique-name<span class="o">}]</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="o">[</span>crush-failure-domain<span class="o">={</span>bucket-type<span class="o">}]</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="o">[</span>crush-device-class<span class="o">={</span>device-class<span class="o">}]</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="o">[</span><span class="nv">directory</span><span class="o">={</span>directory<span class="o">}]</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span><span class="o">[</span>--force<span class="o">]</span></span>
</pre></div></div><p>Where:</p>
<p><code class="docutils literal notranslate"><span class="pre">k={data</span> <span class="pre">chunks}</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p>Each object is split into <strong>data-chunks</strong> parts,
each of which is stored on a different OSD.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>Integer</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>Yes.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p>4</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">m={coding-chunks}</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p>Compute <strong>coding chunks</strong> for each object and store them
on different OSDs. The number of coding chunks is also
the number of OSDs that can be down without losing data.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>Integer</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>Yes.</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p>2</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">d={helper-chunks}</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p>Number of OSDs requested to send data during recovery of
a single chunk. <em>d</em> needs to be chosen such that
k+1 &lt;= d &lt;= k+m-1. The larger the <em>d</em>, the better the savings.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>Integer</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>No.</p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>k+m-1</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">scalar_mds={jerasure|isa|shec}</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p><strong>scalar_mds</strong> specifies the plugin that is used as a
building block in the layered construction. It can be
one of <em>jerasure</em>, <em>isa</em>, <em>shec</em></p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>String</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>No.</p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>jerasure</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">technique={technique}</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p><strong>technique</strong> specifies the technique that will be picked
within the ‘scalar_mds’ plugin specified. Supported techniques
are ‘reed_sol_van’, ‘reed_sol_r6_op’, ‘cauchy_orig’,
‘cauchy_good’, ‘liber8tion’ for jerasure, ‘reed_sol_van’,
‘cauchy’ for isa and ‘single’, ‘multiple’ for shec.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>String</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>No.</p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>reed_sol_van (for jerasure, isa), single (for shec)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">crush-root={root}</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p>The name of the crush bucket used for the first step of
the CRUSH rule. For instance <strong>step take default</strong>.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>String</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>No.</p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>default</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">crush-failure-domain={bucket-type}</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p>Ensure that no two chunks are in a bucket with the same
failure domain. For instance, if the failure domain is
<strong>host</strong> no two chunks will be stored on the same
host. It is used to create a CRUSH rule step such as <strong>step
chooseleaf host</strong>.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>String</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>No.</p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>host</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">crush-device-class={device-class}</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p>Restrict placement to devices of a specific class (e.g.,
<code class="docutils literal notranslate"><span class="pre">ssd</span></code> or <code class="docutils literal notranslate"><span class="pre">hdd</span></code>), using the crush device class names
in the CRUSH map.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>String</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>No.</p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p></p></dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">directory={directory}</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p>Set the <strong>directory</strong> name from which the erasure code
plugin is loaded.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>String</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>No.</p>
</dd>
<dt class="field-even">Default</dt>
<dd class="field-even"><p>/usr/lib/ceph/erasure-code</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">--force</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Description</dt>
<dd class="field-odd"><p>Override an existing profile by the same name.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>String</p>
</dd>
<dt class="field-odd">Required</dt>
<dd class="field-odd"><p>No.</p>
</dd>
</dl>
</section>
<section id="notion-of-sub-chunks">
<h2>Notion of sub-chunks<a class="headerlink" href="#notion-of-sub-chunks" title="Permalink to this heading">¶</a></h2>
<p>The Clay code is able to save in terms of disk IO, network bandwidth as it
is a vector code and it is able to view and manipulate data within a chunk
at a finer granularity termed as a sub-chunk. The number of sub-chunks within
a chunk for a Clay code is given by:</p>
<blockquote>
<div><p>sub-chunk count = <span class="math notranslate nohighlight">\(q^{\frac{k+m}{q}}\)</span>, where <span class="math notranslate nohighlight">\(q = d - k + 1\)</span></p>
</div></blockquote>
<p>During repair of an OSD, the helper information requested
from an available OSD is only a fraction of a chunk. In fact, the number
of sub-chunks within a chunk that are accessed during repair is given by:</p>
<blockquote>
<div><p>repair sub-chunk count = <span class="math notranslate nohighlight">\(\frac{sub---chunk \: count}{q}\)</span></p>
</div></blockquote>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>For a configuration with <em>k=4</em>, <em>m=2</em>, <em>d=5</em>, the sub-chunk count is
8 and  the repair sub-chunk count is 4. Therefore, only half of a chunk is read
during repair.</p></li>
<li><p>When <em>k=8</em>, <em>m=4</em>, <em>d=11</em> the sub-chunk count is 64 and repair sub-chunk count
is 16. A quarter of a chunk is read from an available OSD for repair of a failed
chunk.</p></li>
</ol>
</section>
</section>
<section id="how-to-choose-a-configuration-given-a-workload">
<h2>How to choose a configuration given a workload<a class="headerlink" href="#how-to-choose-a-configuration-given-a-workload" title="Permalink to this heading">¶</a></h2>
<p>Only a few sub-chunks are read of all the sub-chunks within a chunk. These sub-chunks
are not necessarily stored consecutively within a chunk. For best disk IO
performance, it is helpful to read contiguous data. For this reason, it is suggested that
you choose stripe-size such that the sub-chunk size is sufficiently large.</p>
<p>For a given stripe-size (that’s fixed based on a workload), choose <code class="docutils literal notranslate"><span class="pre">k</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code> such that:</p>
<blockquote>
<div><p>sub-chunk size = <span class="math notranslate nohighlight">\(\frac{stripe-size}{k sub-chunk count}\)</span> = 4KB, 8KB, 12KB …</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>For large size workloads for which the stripe size is large, it is easy to choose k, m, d.
For example consider a stripe-size of size 64MB, choosing <em>k=16</em>, <em>m=4</em> and <em>d=19</em> will
result in a sub-chunk count of 1024 and a sub-chunk size of 4KB.</p></li>
<li><p>For small size workloads, <em>k=4</em>, <em>m=2</em> is a good configuration that provides both network
and disk IO benefits.</p></li>
</ol>
</section>
<section id="comparisons-with-lrc">
<h2>Comparisons with LRC<a class="headerlink" href="#comparisons-with-lrc" title="Permalink to this heading">¶</a></h2>
<p>Locally Recoverable Codes (LRC) are also designed in order to save in terms of network
bandwidth, disk IO during single OSD recovery. However, the focus in LRCs is to keep the
number of OSDs contacted during repair (d) to be minimal, but this comes at the cost of storage overhead.
The <em>clay</em> code has a storage overhead m/k. In the case of an <em>lrc</em>, it stores (k+m)/d parities in
addition to the <code class="docutils literal notranslate"><span class="pre">m</span></code> parities resulting in a storage overhead (m+(k+m)/d)/k. Both <em>clay</em> and <em>lrc</em>
can recover from the failure of any <code class="docutils literal notranslate"><span class="pre">m</span></code> OSDs.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 19%" />
<col style="width: 20%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
<th class="head" colspan="2"><p>disk IO, storage overhead (LRC)</p></th>
<th class="head"><p>disk IO, storage overhead (CLAY)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>(k=10, m=4)</p></td>
<td colspan="2"><p>7 * S, 0.6 (d=7)</p></td>
<td><p>3.25 * S, 0.4 (d=13)</p></td>
</tr>
<tr class="row-odd"><td><p>(k=16, m=4)</p></td>
<td colspan="2"><p>4 * S, 0.5625 (d=4)</p></td>
<td><p>4.75 * S, 0.25 (d=19)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>where <code class="docutils literal notranslate"><span class="pre">S</span></code> is the amount of data stored of single OSD being recovered.</p>
</section>
</section>



            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../">
              <img class="logo" src="../../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../start/intro/">Intro to Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/">Installing Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephadm/">Cephadm</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">Ceph Storage Cluster</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../configuration/">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cephadm/">Deployment</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">Operations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../operating/">Operating a Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../health-checks/">Health checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../monitoring/">Monitoring a Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../monitoring-osd-pg/">Monitoring OSDs and PGs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-management/">User Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pg-repair/">Repairing PG Inconsistencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data-placement/">Data Placement Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pools/">Pools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../erasure-code/">Erasure code</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../erasure-code/#creating-a-sample-erasure-coded-pool">Creating a sample erasure-coded pool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../erasure-code/#erasure-code-profiles">Erasure-code profiles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../erasure-code/#erasure-coding-with-overwrites">Erasure Coding with Overwrites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../erasure-code/#erasure-coded-pools-and-cache-tiering">Erasure-coded pools and cache tiering</a></li>
<li class="toctree-l4"><a class="reference internal" href="../erasure-code/#erasure-coded-pool-recovery">Erasure-coded pool recovery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../erasure-code/#glossary">Glossary</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../erasure-code/#table-of-contents">Table of contents</a><ul class="current">
<li class="toctree-l5 current"><a class="reference internal" href="../erasure-code-profile/">Erasure code profiles</a><ul class="current">
<li class="toctree-l6"><a class="reference internal" href="../erasure-code-jerasure/">Jerasure erasure code plugin</a></li>
<li class="toctree-l6"><a class="reference internal" href="../erasure-code-isa/">ISA erasure code plugin</a></li>
<li class="toctree-l6"><a class="reference internal" href="../erasure-code-lrc/">Locally repairable erasure code plugin</a></li>
<li class="toctree-l6"><a class="reference internal" href="../erasure-code-shec/">SHEC erasure code plugin</a></li>
<li class="toctree-l6 current"><a class="current reference internal" href="#">CLAY code plugin</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#erasure-code-profile-examples">Erasure-code profile examples</a></li>
<li class="toctree-l7"><a class="reference internal" href="#creating-a-clay-profile">Creating a clay profile</a></li>
<li class="toctree-l7"><a class="reference internal" href="#notion-of-sub-chunks">Notion of sub-chunks</a><ul>
<li class="toctree-l8"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#how-to-choose-a-configuration-given-a-workload">How to choose a configuration given a workload</a></li>
<li class="toctree-l7"><a class="reference internal" href="#comparisons-with-lrc">Comparisons with LRC</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../erasure-code-profile/#osd-erasure-code-profile-set">osd erasure-code-profile set</a></li>
<li class="toctree-l6"><a class="reference internal" href="../erasure-code-profile/#osd-erasure-code-profile-rm">osd erasure-code-profile rm</a></li>
<li class="toctree-l6"><a class="reference internal" href="../erasure-code-profile/#osd-erasure-code-profile-get">osd erasure-code-profile get</a></li>
<li class="toctree-l6"><a class="reference internal" href="../erasure-code-profile/#osd-erasure-code-profile-ls">osd erasure-code-profile ls</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../erasure-code-jerasure/">Jerasure erasure code plugin</a></li>
<li class="toctree-l5"><a class="reference internal" href="../erasure-code-isa/">ISA erasure code plugin</a></li>
<li class="toctree-l5"><a class="reference internal" href="../erasure-code-lrc/">Locally repairable erasure code plugin</a></li>
<li class="toctree-l5"><a class="reference internal" href="../erasure-code-shec/">SHEC erasure code plugin</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">CLAY code plugin</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#erasure-code-profile-examples">Erasure-code profile examples</a></li>
<li class="toctree-l6"><a class="reference internal" href="#creating-a-clay-profile">Creating a clay profile</a></li>
<li class="toctree-l6"><a class="reference internal" href="#notion-of-sub-chunks">Notion of sub-chunks</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#how-to-choose-a-configuration-given-a-workload">How to choose a configuration given a workload</a></li>
<li class="toctree-l6"><a class="reference internal" href="#comparisons-with-lrc">Comparisons with LRC</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cache-tiering/">Cache Tiering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../placement-groups/">Placement Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../balancer/">Balancer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upmap/">Using pg-upmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crush-map/">CRUSH Maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crush-map-edits/">Manually editing a CRUSH Map</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stretch-mode/">Stretch Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../change-mon-elections/">Configure Monitor Election Strategies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../add-or-rm-osds/">Adding/Removing OSDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../add-or-rm-mons/">Adding/Removing Monitors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../devices/">Device Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bluestore-migration/">BlueStore Migration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../control/">Command Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../troubleshooting/community/">The Ceph Community</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../troubleshooting/troubleshooting-mon/">Troubleshooting Monitors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../troubleshooting/troubleshooting-osd/">Troubleshooting OSDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../troubleshooting/troubleshooting-pg/">Troubleshooting PGs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../troubleshooting/log-and-debug/">Logging and Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../troubleshooting/cpu-profiling/">CPU Profiling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../troubleshooting/memory-profiling/">Memory Profiling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../man/">Man Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/">APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephfs/">Ceph File System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rbd/">Ceph Block Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../radosgw/">Ceph Object Gateway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/">Ceph Manager Daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/dashboard/">Ceph Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/developer_guide/">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/internals/">Ceph Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../governance/">Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../foundation/">Ceph Foundation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/general/">Ceph Releases (general)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/">Ceph Releases (index)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/">Glossary</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../cache-tiering/" title="Cache Tiering"
             >next</a> |</li>
        <li class="right" >
          <a href="../erasure-code-shec/" title="SHEC erasure code plugin"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../" >Ceph Storage Cluster</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../" >Cluster Operations</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../erasure-code/" >Erasure code</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="../erasure-code-profile/" >Erasure code profiles</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">CLAY code plugin</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>