
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>iSCSI Gateway Requirements &#8212; Ceph Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="iSCSI Targets" href="../iscsi-targets/" />
    <link rel="prev" title="Ceph iSCSI Gateway" href="../iscsi-overview/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../iscsi-targets/" title="iSCSI Targets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../iscsi-overview/" title="Ceph iSCSI Gateway"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph Block Device</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../rbd-integrations/" >Ceph Block Device 3rd Party Integration</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../iscsi-overview/" accesskey="U">Ceph iSCSI Gateway</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">iSCSI Gateway Requirements</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div id="docubetter" align="right" style="padding: 15px; font-weight: bold;">
    <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <section id="iscsi-gateway-requirements">
<h1>iSCSI Gateway Requirements<a class="headerlink" href="#iscsi-gateway-requirements" title="Permalink to this heading">¶</a></h1>
<p>It is recommended to provision two to four iSCSI gateway nodes to
realize a highly available Ceph iSCSI gateway solution.</p>
<p>For hardware recommendations, see <a class="reference internal" href="../../start/hardware-recommendations/#hardware-recommendations"><span class="std std-ref">Hardware Recommendations</span></a> .</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On iSCSI gateway nodes the memory footprint is a function of
of the RBD images mapped and can grow to be large. Plan memory
requirements accordingly based on the number RBD images to be mapped.</p>
</div>
<p>There are no specific iSCSI gateway options for the Ceph Monitors or
OSDs, but it is important to lower the default heartbeat interval for
detecting down OSDs to reduce the possibility of initiator timeouts.
The following configuration options are suggested:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">osd</span><span class="p">]</span>
<span class="n">osd</span> <span class="n">heartbeat</span> <span class="n">grace</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">osd</span> <span class="n">heartbeat</span> <span class="n">interval</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Updating Running State From a Ceph Monitor Node</p></li>
</ul>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span> <span class="n">tell</span> <span class="o">&lt;</span><span class="n">daemon_type</span><span class="o">&gt;.&lt;</span><span class="nb">id</span><span class="o">&gt;</span> <span class="n">config</span> <span class="nb">set</span> <span class="o">&lt;</span><span class="n">parameter_name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">new_value</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span> <span class="n">tell</span> <span class="n">osd</span><span class="o">.*</span> <span class="n">config</span> <span class="nb">set</span> <span class="n">osd_heartbeat_grace</span> <span class="mi">20</span>
<span class="n">ceph</span> <span class="n">tell</span> <span class="n">osd</span><span class="o">.*</span> <span class="n">config</span> <span class="nb">set</span> <span class="n">osd_heartbeat_interval</span> <span class="mi">5</span>
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>Updating Running State On Each OSD Node</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span> <span class="n">daemon</span> <span class="o">&lt;</span><span class="n">daemon_type</span><span class="o">&gt;.&lt;</span><span class="nb">id</span><span class="o">&gt;</span> <span class="n">config</span> <span class="nb">set</span> <span class="n">osd_client_watch_timeout</span> <span class="mi">15</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span> <span class="n">daemon</span> <span class="n">osd</span><span class="mf">.0</span> <span class="n">config</span> <span class="nb">set</span> <span class="n">osd_heartbeat_grace</span> <span class="mi">20</span>
<span class="n">ceph</span> <span class="n">daemon</span> <span class="n">osd</span><span class="mf">.0</span> <span class="n">config</span> <span class="nb">set</span> <span class="n">osd_heartbeat_interval</span> <span class="mi">5</span>
</pre></div>
</div>
</li>
</ul>
<p>For more details on setting Ceph’s configuration options, see
<a class="reference internal" href="../../rados/configuration/ceph-conf/#configuring-ceph"><span class="std std-ref">Configuring Ceph</span></a>.  Be sure to persist these settings in
<code class="docutils literal notranslate"><span class="pre">/etc/ceph.conf</span></code> or, on Mimic and later releases, in the
centralized config store.</p>
</section>



            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Intro to Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephadm/">Cephadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph Storage Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph File System</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph Block Device</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../rados-rbd-cmds/">Basic Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rbd-operations/">Operations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../rbd-integrations/">Integrations</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../rbd-ko/">Kernel Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../qemu-rbd/">QEMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../libvirt/">libvirt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rbd-kubernetes/">Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rbd-openstack/">OpenStack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rbd-cloudstack/">CloudStack</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../iscsi-overview/">LIO iSCSI Gateway</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iscsi-targets/">Configuring the iSCSI Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iscsi-initiators/">Configuring the iSCSI Initiators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../iscsi-monitoring/">Monitoring the iSCSI Gateways</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rbd-windows/">Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../man/">Manpages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/">APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph Object Gateway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/">Ceph Manager Daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/dashboard/">Ceph Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/developer_guide/">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/internals/">Ceph Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../governance/">Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../foundation/">Ceph Foundation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/general/">Ceph Releases (general)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/">Ceph Releases (index)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../iscsi-targets/" title="iSCSI Targets"
             >next</a> |</li>
        <li class="right" >
          <a href="../iscsi-overview/" title="Ceph iSCSI Gateway"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph Block Device</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../rbd-integrations/" >Ceph Block Device 3rd Party Integration</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../iscsi-overview/" >Ceph iSCSI Gateway</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">iSCSI Gateway Requirements</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>