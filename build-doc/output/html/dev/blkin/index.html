
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Tracing Ceph With Blkin &#8212; Ceph Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="BlueStore Internals" href="../bluestore/" />
    <link rel="prev" title="Ceph Internals" href="../internals/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../bluestore/" title="BlueStore Internals"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../internals/" title="Ceph Internals"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../internals/" accesskey="U">Ceph Internals</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tracing Ceph With Blkin</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div id="docubetter" align="right" style="padding: 15px; font-weight: bold;">
    <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <section id="tracing-ceph-with-blkin">
<h1>Tracing Ceph With Blkin<a class="headerlink" href="#tracing-ceph-with-blkin" title="Permalink to this heading">¶</a></h1>
<p>Ceph can use Blkin, a library created by Marios Kogias and others,
which enables tracking a specific request from the time it enters
the system at higher levels till it is finally served by RADOS.</p>
<p>In general, Blkin implements the <a class="reference external" href="http://static.googleusercontent.com/media/research.google.com/el//pubs/archive/36356.pdf">Dapper</a> tracing semantics
in order to show the causal relationships between the different
processing phases that an IO request may trigger. The goal is an
end-to-end visualisation of the request’s route in the system,
accompanied by information concerning latencies in each processing
phase. Thanks to LTTng this can happen with a minimal overhead and
in realtime. The LTTng traces can then be visualized with Twitter’s
<a class="reference external" href="https://zipkin.io/">Zipkin</a>.</p>
<section id="installing-blkin">
<h2>Installing Blkin<a class="headerlink" href="#installing-blkin" title="Permalink to this heading">¶</a></h2>
<p>You can install Markos Kogias’ upstream <a class="reference external" href="https://github.com/marioskogias/blkin">Blkin</a> by hand.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">blkin</span><span class="o">/</span>
<span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
<p>or build distribution packages using <a class="reference external" href="https://github.com/agshew/blkin">DistroReadyBlkin</a>, which also comes with
pkgconfig support. If you choose the latter, then you must generate the
configure and make files first.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">blkin</span>
<span class="n">autoreconf</span> <span class="o">-</span><span class="n">i</span>
</pre></div>
</div>
</section>
<section id="configuring-ceph-with-blkin">
<h2>Configuring Ceph with Blkin<a class="headerlink" href="#configuring-ceph-with-blkin" title="Permalink to this heading">¶</a></h2>
<p>If you built and installed Blkin by hand, rather than building and
installing packages, then set these variables before configuring
Ceph.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">BLKIN_CFLAGS</span><span class="o">=-</span><span class="n">Iblkin</span><span class="o">/</span>
<span class="n">export</span> <span class="n">BLKIN_LIBS</span><span class="o">=-</span><span class="n">lzipkin</span><span class="o">-</span><span class="n">cpp</span>
</pre></div>
</div>
<p>Blkin support in Ceph is disabled by default, so you may
want to configure with something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">do_cmake</span> <span class="o">-</span><span class="n">DWITH_BLKIN</span><span class="o">=</span><span class="n">ON</span>
</pre></div>
</div>
<p>Config option for blkin must be set to true in ceph.conf to get
traces from rbd through OSDC and OSD:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rbd_blkin_trace_all</span> <span class="o">=</span> <span class="n">true</span>
</pre></div>
</div>
</section>
<section id="testing-blkin">
<h2>Testing Blkin<a class="headerlink" href="#testing-blkin" title="Permalink to this heading">¶</a></h2>
<p>It’s easy to test Ceph’s Blkin tracing. Let’s assume you don’t have
Ceph already running, and you compiled Ceph with Blkin support but
you didn’t install it. Then launch Ceph with the <code class="docutils literal notranslate"><span class="pre">vstart.sh</span></code> script
in Ceph’s src directory so you can see the possible tracepoints.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">src</span>
<span class="n">OSD</span><span class="o">=</span><span class="mi">3</span> <span class="n">MON</span><span class="o">=</span><span class="mi">3</span> <span class="n">RGW</span><span class="o">=</span><span class="mi">1</span> <span class="o">./</span><span class="n">vstart</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">n</span>
<span class="n">lttng</span> <span class="nb">list</span> <span class="o">--</span><span class="n">userspace</span>
</pre></div>
</div>
<p>You’ll see something like the following::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UST</span> <span class="n">events</span><span class="p">:</span>
<span class="o">-------------</span>
<span class="n">PID</span><span class="p">:</span> <span class="mi">8987</span> <span class="o">-</span> <span class="n">Name</span><span class="p">:</span> <span class="o">./</span><span class="n">ceph</span><span class="o">-</span><span class="n">osd</span>
      <span class="n">zipkin</span><span class="p">:</span><span class="n">timestamp</span> <span class="p">(</span><span class="n">loglevel</span><span class="p">:</span> <span class="n">TRACE_WARNING</span> <span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">tracepoint</span><span class="p">)</span>
      <span class="n">zipkin</span><span class="p">:</span><span class="n">keyval_integer</span> <span class="p">(</span><span class="n">loglevel</span><span class="p">:</span> <span class="n">TRACE_WARNING</span> <span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">tracepoint</span><span class="p">)</span>
      <span class="n">zipkin</span><span class="p">:</span><span class="n">keyval_string</span> <span class="p">(</span><span class="n">loglevel</span><span class="p">:</span> <span class="n">TRACE_WARNING</span> <span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">tracepoint</span><span class="p">)</span>
      <span class="n">lttng_ust_tracelog</span><span class="p">:</span><span class="n">TRACE_DEBUG</span> <span class="p">(</span><span class="n">loglevel</span><span class="p">:</span> <span class="n">TRACE_DEBUG</span> <span class="p">(</span><span class="mi">14</span><span class="p">))</span> <span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">tracepoint</span><span class="p">)</span>

<span class="n">PID</span><span class="p">:</span> <span class="mi">8407</span> <span class="o">-</span> <span class="n">Name</span><span class="p">:</span> <span class="o">./</span><span class="n">ceph</span><span class="o">-</span><span class="n">mon</span>
      <span class="n">zipkin</span><span class="p">:</span><span class="n">timestamp</span> <span class="p">(</span><span class="n">loglevel</span><span class="p">:</span> <span class="n">TRACE_WARNING</span> <span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">tracepoint</span><span class="p">)</span>
      <span class="n">zipkin</span><span class="p">:</span><span class="n">keyval_integer</span> <span class="p">(</span><span class="n">loglevel</span><span class="p">:</span> <span class="n">TRACE_WARNING</span> <span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">tracepoint</span><span class="p">)</span>
      <span class="n">zipkin</span><span class="p">:</span><span class="n">keyval_string</span> <span class="p">(</span><span class="n">loglevel</span><span class="p">:</span> <span class="n">TRACE_WARNING</span> <span class="p">(</span><span class="mi">4</span><span class="p">))</span> <span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">tracepoint</span><span class="p">)</span>
      <span class="n">lttng_ust_tracelog</span><span class="p">:</span><span class="n">TRACE_DEBUG</span> <span class="p">(</span><span class="n">loglevel</span><span class="p">:</span> <span class="n">TRACE_DEBUG</span> <span class="p">(</span><span class="mi">14</span><span class="p">))</span> <span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">tracepoint</span><span class="p">)</span>

<span class="o">...</span>
</pre></div>
</div>
<p>Next, stop Ceph so that the tracepoints can be enabled.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">stop</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Start up an LTTng session and enable the tracepoints.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lttng</span> <span class="n">create</span> <span class="n">blkin</span><span class="o">-</span><span class="n">test</span>
<span class="n">lttng</span> <span class="n">enable</span><span class="o">-</span><span class="n">event</span> <span class="o">--</span><span class="n">userspace</span> <span class="n">zipkin</span><span class="p">:</span><span class="n">timestamp</span>
<span class="n">lttng</span> <span class="n">enable</span><span class="o">-</span><span class="n">event</span> <span class="o">--</span><span class="n">userspace</span> <span class="n">zipkin</span><span class="p">:</span><span class="n">keyval_integer</span>
<span class="n">lttng</span> <span class="n">enable</span><span class="o">-</span><span class="n">event</span> <span class="o">--</span><span class="n">userspace</span> <span class="n">zipkin</span><span class="p">:</span><span class="n">keyval_string</span>
<span class="n">lttng</span> <span class="n">start</span>
</pre></div>
</div>
<p>Then start up Ceph again.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OSD</span><span class="o">=</span><span class="mi">3</span> <span class="n">MON</span><span class="o">=</span><span class="mi">3</span> <span class="n">RGW</span><span class="o">=</span><span class="mi">1</span> <span class="o">./</span><span class="n">vstart</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">n</span>
</pre></div>
</div>
<p>You may want to check that ceph is up.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">ceph</span> <span class="n">status</span>
</pre></div>
</div>
<p>Now put something in using rados, check that it made it, get it back, and remove it.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">ceph</span> <span class="n">osd</span> <span class="n">pool</span> <span class="n">create</span> <span class="n">test</span><span class="o">-</span><span class="n">blkin</span>
<span class="o">./</span><span class="n">rados</span> <span class="n">put</span> <span class="n">test</span><span class="o">-</span><span class="nb">object</span><span class="o">-</span><span class="mi">1</span> <span class="o">./</span><span class="n">vstart</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">pool</span><span class="o">=</span><span class="n">test</span><span class="o">-</span><span class="n">blkin</span>
<span class="o">./</span><span class="n">rados</span> <span class="o">-</span><span class="n">p</span> <span class="n">test</span><span class="o">-</span><span class="n">blkin</span> <span class="n">ls</span>
<span class="o">./</span><span class="n">ceph</span> <span class="n">osd</span> <span class="nb">map</span> <span class="n">test</span><span class="o">-</span><span class="n">blkin</span> <span class="n">test</span><span class="o">-</span><span class="nb">object</span><span class="o">-</span><span class="mi">1</span>
<span class="o">./</span><span class="n">rados</span> <span class="n">get</span> <span class="n">test</span><span class="o">-</span><span class="nb">object</span><span class="o">-</span><span class="mi">1</span> <span class="o">./</span><span class="n">vstart</span><span class="o">-</span><span class="n">copy</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">pool</span><span class="o">=</span><span class="n">test</span><span class="o">-</span><span class="n">blkin</span>
<span class="n">md5sum</span> <span class="n">vstart</span><span class="o">*</span>
<span class="o">./</span><span class="n">rados</span> <span class="n">rm</span> <span class="n">test</span><span class="o">-</span><span class="nb">object</span><span class="o">-</span><span class="mi">1</span> <span class="o">--</span><span class="n">pool</span><span class="o">=</span><span class="n">test</span><span class="o">-</span><span class="n">blkin</span>
</pre></div>
</div>
<p>You could also use the example in <code class="docutils literal notranslate"><span class="pre">examples/librados/</span></code> or <code class="docutils literal notranslate"><span class="pre">rados</span> <span class="pre">bench</span></code>.</p>
<p>Then stop the LTTng session and see what was collected.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lttng</span> <span class="n">stop</span>
<span class="n">lttng</span> <span class="n">view</span>
</pre></div>
</div>
<p>You’ll see something like::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mf">08.884275486</span><span class="p">]</span> <span class="p">(</span><span class="o">+</span><span class="mf">0.000225472</span><span class="p">)</span> <span class="n">ubuntu</span> <span class="n">zipkin</span><span class="p">:</span><span class="n">timestamp</span><span class="p">:</span> <span class="p">{</span> <span class="n">cpu_id</span> <span class="o">=</span> <span class="mi">53</span> <span class="p">},</span> <span class="p">{</span> <span class="n">trace_name</span> <span class="o">=</span> <span class="s2">&quot;op&quot;</span><span class="p">,</span> <span class="n">service_name</span> <span class="o">=</span> <span class="s2">&quot;Objecter&quot;</span><span class="p">,</span> <span class="n">port_no</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ip</span> <span class="o">=</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">trace_id</span> <span class="o">=</span> <span class="mi">5485970765435202833</span><span class="p">,</span> <span class="n">span_id</span> <span class="o">=</span> <span class="mi">5485970765435202833</span><span class="p">,</span> <span class="n">parent_span_id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">event</span> <span class="o">=</span> <span class="s2">&quot;osd op reply&quot;</span> <span class="p">}</span>
<span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mf">08.884614135</span><span class="p">]</span> <span class="p">(</span><span class="o">+</span><span class="mf">0.000002839</span><span class="p">)</span> <span class="n">ubuntu</span> <span class="n">zipkin</span><span class="p">:</span><span class="n">keyval_integer</span><span class="p">:</span> <span class="p">{</span> <span class="n">cpu_id</span> <span class="o">=</span> <span class="mi">10</span> <span class="p">},</span> <span class="p">{</span> <span class="n">trace_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">service_name</span> <span class="o">=</span> <span class="s2">&quot;Messenger&quot;</span><span class="p">,</span> <span class="n">port_no</span> <span class="o">=</span> <span class="mi">6805</span><span class="p">,</span> <span class="n">ip</span> <span class="o">=</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">trace_id</span> <span class="o">=</span> <span class="mi">7381732770245808782</span><span class="p">,</span> <span class="n">span_id</span> <span class="o">=</span> <span class="mi">7387710183742669839</span><span class="p">,</span> <span class="n">parent_span_id</span> <span class="o">=</span> <span class="mi">1205040135881905799</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;tid&quot;</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">}</span>
<span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mf">08.884616431</span><span class="p">]</span> <span class="p">(</span><span class="o">+</span><span class="mf">0.000002296</span><span class="p">)</span> <span class="n">ubuntu</span> <span class="n">zipkin</span><span class="p">:</span><span class="n">keyval_string</span><span class="p">:</span> <span class="p">{</span> <span class="n">cpu_id</span> <span class="o">=</span> <span class="mi">10</span> <span class="p">},</span> <span class="p">{</span> <span class="n">trace_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">service_name</span> <span class="o">=</span> <span class="s2">&quot;Messenger&quot;</span><span class="p">,</span> <span class="n">port_no</span> <span class="o">=</span> <span class="mi">6805</span><span class="p">,</span> <span class="n">ip</span> <span class="o">=</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">trace_id</span> <span class="o">=</span> <span class="mi">7381732770245808782</span><span class="p">,</span> <span class="n">span_id</span> <span class="o">=</span> <span class="mi">7387710183742669839</span><span class="p">,</span> <span class="n">parent_span_id</span> <span class="o">=</span> <span class="mi">1205040135881905799</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;entity type&quot;</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="s2">&quot;client&quot;</span> <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="install-zipkin">
<h2>Install  Zipkin<a class="headerlink" href="#install-zipkin" title="Permalink to this heading">¶</a></h2>
<p>One of the points of using Blkin is so that you can look at the traces
using Zipkin. Users should run Zipkin as a tracepoints collector and
also a web service. The executable jar runs a collector on port 9410 and
the web interface on port 9411</p>
<p>Download Zipkin Package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openzipkin</span><span class="o">/</span><span class="n">zipkin</span> <span class="o">&amp;&amp;</span> <span class="n">cd</span> <span class="n">zipkin</span>
<span class="n">wget</span> <span class="o">-</span><span class="n">O</span> <span class="n">zipkin</span><span class="o">.</span><span class="n">jar</span> <span class="s1">&#39;https://search.maven.org/remote_content?g=io.zipkin.java&amp;a=zipkin-server&amp;v=LATEST&amp;c=exec&#39;</span>
<span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="n">zipkin</span><span class="o">.</span><span class="n">jar</span>
</pre></div>
</div>
</section>
<section id="show-ceph-s-blkin-traces-in-zipkin-web">
<h2>Show Ceph’s Blkin Traces in Zipkin-web<a class="headerlink" href="#show-ceph-s-blkin-traces-in-zipkin-web" title="Permalink to this heading">¶</a></h2>
<p>Download babeltrace-zipkin project. This project takes the traces
generated with blkin and sends them to a Zipkin collector using scribe:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">vears91</span><span class="o">/</span><span class="n">babeltrace</span><span class="o">-</span><span class="n">zipkin</span>
<span class="n">cd</span> <span class="n">babeltrace</span><span class="o">-</span><span class="n">zipkin</span>
</pre></div>
</div>
<p>Send lttng data to Zipkin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>python3 babeltrace_zipkin.py ${lttng-traces-dir}/${blkin-test}/ust/uid/0/64-bit/ -p ${zipkin-collector-port(9410 by default)} -s ${zipkin-collector-ip}
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">babeltrace_zipkin</span><span class="o">.</span><span class="n">py</span> <span class="o">~/</span><span class="n">lttng</span><span class="o">-</span><span class="n">traces</span><span class="o">-</span><span class="nb">dir</span><span class="o">/</span><span class="n">blkin</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="mi">20150225</span><span class="o">-</span><span class="mi">160222</span><span class="o">/</span><span class="n">ust</span><span class="o">/</span><span class="n">uid</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="o">/</span> <span class="o">-</span><span class="n">p</span> <span class="mi">9410</span> <span class="o">-</span><span class="n">s</span> <span class="mf">127.0.0.1</span>
</pre></div>
</div>
<p>Check Ceph traces on webpage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Browse http://${zipkin-collector-ip}:9411
Click &quot;Find traces&quot;
</pre></div>
</div>
</section>
</section>



            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Intro to Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephadm/">Cephadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph Storage Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph File System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/">Ceph Block Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph Object Gateway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/">Ceph Manager Daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/dashboard/">Ceph Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/">Developer Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../internals/">Ceph Internals</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tracing Ceph With Blkin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-blkin">Installing Blkin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-ceph-with-blkin">Configuring Ceph with Blkin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-blkin">Testing Blkin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-zipkin">Install  Zipkin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#show-ceph-s-blkin-traces-in-zipkin-web">Show Ceph’s Blkin Traces in Zipkin-web</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bluestore/">BlueStore Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cache-pool/">Cache pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ceph_krb_auth/">A Detailed Documentation on How to Set up Ceph Kerberos Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cephfs-mirroring/">CephFS Mirroring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cephfs-reclaim/">CephFS Reclaim Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cephfs-snapshots/">CephFS Snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cephx/">Cephx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cephx_protocol/">A Detailed Description of the Cephx Authentication Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config/">Configuration Management System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config-key/">config-key layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../context/">CephContext</a></li>
<li class="toctree-l2"><a class="reference internal" href="../continuous-integration/">Continuous Integration Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../corpus/">Corpus structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpu-profiler/">Installing Oprofile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cxx/">C++17 and libstdc++ ABI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../delayed-delete/">CephFS delayed deletion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_cluster_deployement/">Deploying a development cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_cluster_deployement/#deploying-multiple-development-clusters-on-the-same-machine">Deploying multiple development clusters on the same machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development-workflow/">Development workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documenting/">Documenting Ceph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../encoding/">Serialization (encode/decode)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../erasure-coded-pool/">Erasure Coded pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file-striping/">File striping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../freebsd/">FreeBSD Implementation details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generatedocs/">Building Ceph Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iana/">IANA Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kubernetes/">Hacking on Ceph in Kubernetes with Rook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libs/">Library architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging/">Use of the cluster log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logs/">Debug logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../macos/">build on MacOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../messenger/">Messenger notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mon-bootstrap/">Monitor bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mon-elections/">Monitor Elections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mon-on-disk-formats/">ON-DISK FORMAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mon-osdmap-prune/">FULL OSDMAP VERSION PRUNING</a></li>
<li class="toctree-l2"><a class="reference internal" href="../msgr2/">msgr2 protocol (msgr2.0 and msgr2.1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network-encoding/">Network Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network-protocol/">Network Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object-store/">Object Store Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../osd-class-path/">OSD class path issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peering/">Peering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perf/">Using perf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perf_counters/">Perf counters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perf_histograms/">Perf histograms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../placement-group/">PG (Placement Group) notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quick_guide/">Developer Guide (Quick)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rados-client-protocol/">RADOS client protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rbd-diff/">RBD Incremental Backup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rbd-export/">RBD Export &amp; Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rbd-layering/">RBD Layering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-checklists/">Release checklists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-process/">Ceph Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../seastore/">SeaStore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sepia/">Sepia community test lab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../session_authentication/">Session Authentication for the Cephx Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/">Testing notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../versions/">Public OSD Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vstart-ganesha/">NFS CephFS-RGW Developer Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wireshark/">Wireshark Dissector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zoned-storage/">Zoned Storage Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../osd_internals/">OSD developer documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mds_internals/">MDS developer documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../radosgw/">RADOS Gateway developer documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ceph-volume/">ceph-volume developer documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crimson/">Crimson developer documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../governance/">Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../foundation/">Ceph Foundation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/general/">Ceph Releases (general)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/">Ceph Releases (index)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../bluestore/" title="BlueStore Internals"
             >next</a> |</li>
        <li class="right" >
          <a href="../internals/" title="Ceph Internals"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../internals/" >Ceph Internals</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tracing Ceph With Blkin</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>