
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Mount CephFS: Prerequisites &#8212; Ceph Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Mount CephFS using Kernel Driver" href="../mount-using-kernel-driver/" />
    <link rel="prev" title="CephFS Client Capabilities" href="../client-auth/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../mount-using-kernel-driver/" title="Mount CephFS using Kernel Driver"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../client-auth/" title="CephFS Client Capabilities"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" accesskey="U">Ceph File System</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Mount CephFS: Prerequisites</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div id="docubetter" align="right" style="padding: 15px; font-weight: bold;">
    <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <section id="mount-cephfs-prerequisites">
<h1>Mount CephFS: Prerequisites<a class="headerlink" href="#mount-cephfs-prerequisites" title="Permalink to this heading">¶</a></h1>
<p>You can use CephFS by mounting it to your local filesystem or by using
<a class="reference external" href="../cephfs-shell">cephfs-shell</a>. Mounting CephFS requires superuser privileges to trim
dentries by issuing a remount of itself. CephFS can be mounted
<a class="reference external" href="../mount-using-kernel-driver">using kernel</a> as well as <a class="reference external" href="../mount-using-fuse">using FUSE</a>. Both have their own
advantages. Read the following section to understand more about both of
these ways to mount CephFS.</p>
<p>For Windows CephFS mounts, please check the <a class="reference external" href="../ceph-dokan">ceph-dokan</a> page.</p>
<section id="which-cephfs-client">
<h2>Which CephFS Client?<a class="headerlink" href="#which-cephfs-client" title="Permalink to this heading">¶</a></h2>
<p>The FUSE client is the most accessible and the easiest to upgrade to the
version of Ceph used by the storage cluster, while the kernel client will
always gives better performance.</p>
<p>When encountering bugs or performance issues, it is often instructive to
try using the other client, in order to find out whether the bug was
client-specific or not (and then to let the developers know).</p>
</section>
<section id="general-pre-requisite-for-mounting-cephfs">
<h2>General Pre-requisite for Mounting CephFS<a class="headerlink" href="#general-pre-requisite-for-mounting-cephfs" title="Permalink to this heading">¶</a></h2>
<p>Before mounting CephFS, ensure that the client host (where CephFS has to be
mounted and used) has a copy of the Ceph configuration file (i.e.
<code class="docutils literal notranslate"><span class="pre">ceph.conf</span></code>) and a keyring of the CephX user that has permission to access
the MDS. Both of these files must already be present on the host where the
Ceph MON resides.</p>
<ol class="arabic">
<li><p>Generate a minimal conf file for the client host and place it at a
standard location:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># on client host</span>
<span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">-</span><span class="n">m</span> <span class="mi">755</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ceph</span>
<span class="n">ssh</span> <span class="p">{</span><span class="n">user</span><span class="p">}</span><span class="o">@</span><span class="p">{</span><span class="n">mon</span><span class="o">-</span><span class="n">host</span><span class="p">}</span> <span class="s2">&quot;sudo ceph config generate-minimal-conf&quot;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ceph</span><span class="o">/</span><span class="n">ceph</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>Alternatively, you may copy the conf file. But the above method generates
a conf with minimal details which is usually sufficient. For more
information, see <a class="reference external" href="../client-auth">Client Authentication</a> and <a class="reference internal" href="../../rados/configuration/ceph-conf/#bootstrap-options"><span class="std std-ref">Bootstrap options</span></a>.</p>
</li>
<li><p>Ensure that the conf has appropriate permissions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="mi">644</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ceph</span><span class="o">/</span><span class="n">ceph</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
</li>
<li><p>Create a CephX user and get its secret key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="p">{</span><span class="n">user</span><span class="p">}</span><span class="o">@</span><span class="p">{</span><span class="n">mon</span><span class="o">-</span><span class="n">host</span><span class="p">}</span> <span class="s2">&quot;sudo ceph fs authorize cephfs client.foo / rw&quot;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ceph</span><span class="o">/</span><span class="n">ceph</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">keyring</span>
</pre></div>
</div>
<p>In above command, replace <code class="docutils literal notranslate"><span class="pre">cephfs</span></code> with the name of your CephFS, <code class="docutils literal notranslate"><span class="pre">foo</span></code>
by the name you want for your CephX user and <code class="docutils literal notranslate"><span class="pre">/</span></code> by the path within your
CephFS for which you want to allow access to the client host and <code class="docutils literal notranslate"><span class="pre">rw</span></code>
stands for both read and write permissions. Alternatively, you may copy the
Ceph keyring from the MON host to client host at <code class="docutils literal notranslate"><span class="pre">/etc/ceph</span></code> but creating
a keyring specific to the client host is better. While creating a CephX
keyring/client, using same client name across multiple machines is perfectly
fine.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you get 2 prompts for password while running above any of 2
above command, run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">ls</span></code> (or any other trivial command with
sudo) immediately before these commands.</p>
</div>
</li>
<li><p>Ensure that the keyring has appropriate permissions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="mi">600</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ceph</span><span class="o">/</span><span class="n">ceph</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">foo</span><span class="o">.</span><span class="n">keyring</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There might be few more prerequisites for kernel and FUSE mounts
individually, please check respective mount documents.</p>
</div>
</section>
</section>



            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Intro to Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephadm/">Cephadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph Storage Cluster</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph File System</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../#getting-started-with-cephfs">Getting Started with CephFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#administration">Administration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../#mounting-cephfs">Mounting CephFS</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../client-config-ref/"> Client Configuration Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client-auth/"> Client Authentication</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"> Mount CephFS: Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#which-cephfs-client">Which CephFS Client?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general-pre-requisite-for-mounting-cephfs">General Pre-requisite for Mounting CephFS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mount-using-kernel-driver/"> Mount CephFS using Kernel Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mount-using-fuse/"> Mount CephFS using FUSE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-dokan/"> Mount CephFS on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cephfs-shell/"> Use the CephFS Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kernel-features/"> Supported Features of Kernel Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../man/8/ceph-fuse/"> Manual: ceph-fuse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../man/8/mount.ceph/"> Manual: mount.ceph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../man/8/mount.fuse.ceph/"> Manual: mount.fuse.ceph</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../#cephfs-concepts">CephFS Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#troubleshooting-and-disaster-recovery">Troubleshooting and Disaster Recovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#developer-guides">Developer Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#additional-details">Additional Details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/">Ceph Block Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph Object Gateway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/">Ceph Manager Daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/dashboard/">Ceph Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/developer_guide/">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/internals/">Ceph Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../governance/">Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../foundation/">Ceph Foundation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/general/">Ceph Releases (general)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/">Ceph Releases (index)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../mount-using-kernel-driver/" title="Mount CephFS using Kernel Driver"
             >next</a> |</li>
        <li class="right" >
          <a href="../client-auth/" title="CephFS Client Capabilities"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph File System</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Mount CephFS: Prerequisites</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>