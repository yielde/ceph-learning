
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Mount CephFS on Windows &#8212; Ceph Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="CephFS Shell" href="../cephfs-shell/" />
    <link rel="prev" title="Mount CephFS using FUSE" href="../mount-using-fuse/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../cephfs-shell/" title="CephFS Shell"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../mount-using-fuse/" title="Mount CephFS using FUSE"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" accesskey="U">Ceph File System</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Mount CephFS on Windows</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div id="docubetter" align="right" style="padding: 15px; font-weight: bold;">
    <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <section id="mount-cephfs-on-windows">
<span id="ceph-dokan"></span><h1>Mount CephFS on Windows<a class="headerlink" href="#mount-cephfs-on-windows" title="Permalink to this heading">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">ceph-dokan</span></code> can be used for mounting CephFS filesystems on Windows.
It leverages Dokany, a Windows driver that allows implementing filesystems in
userspace, pretty much like FUSE.</p>
<p>Please check the <a class="reference external" href="../../install/windows-install">installation guide</a> to get started.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<section id="mounting-filesystems">
<h3>Mounting filesystems<a class="headerlink" href="#mounting-filesystems" title="Permalink to this heading">¶</a></h3>
<p>In order to mount a ceph filesystem, the following command can be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">dokan</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">c</span> <span class="n">c</span><span class="p">:</span>\<span class="n">ceph</span><span class="o">.</span><span class="n">conf</span> <span class="o">-</span><span class="n">l</span> <span class="n">x</span>
</pre></div>
</div>
<p>This will mount the default ceph filesystem using the drive letter <code class="docutils literal notranslate"><span class="pre">x</span></code>.
If <code class="docutils literal notranslate"><span class="pre">ceph.conf</span></code> is placed at the default location, which is
<code class="docutils literal notranslate"><span class="pre">%ProgramData%\ceph\ceph.conf</span></code>, then this argument becomes optional.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-l</span></code> argument also allows using an empty folder as a mountpoint
instead of a drive letter.</p>
<p>The uid and gid used for mounting the filesystem default to 0 and may be
changed using the following <code class="docutils literal notranslate"><span class="pre">ceph.conf</span></code> options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">client</span><span class="p">]</span>
<span class="c1"># client_permissions = true</span>
<span class="n">client_mount_uid</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">client_mount_gid</span> <span class="o">=</span> <span class="mi">1000</span>
</pre></div>
</div>
<p>If you have more than one FS on your Ceph cluster, use the option
<code class="docutils literal notranslate"><span class="pre">--client_fs</span></code> to mount the non-default FS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">Force</span> <span class="n">C</span><span class="p">:</span>\<span class="n">mnt</span>\<span class="n">mycephfs2</span>
<span class="n">ceph</span><span class="o">-</span><span class="n">dokan</span><span class="o">.</span><span class="n">exe</span> <span class="o">--</span><span class="n">mountpoint</span> <span class="n">C</span><span class="p">:</span>\<span class="n">mnt</span>\<span class="n">mycephfs2</span> <span class="o">--</span><span class="n">client_fs</span> <span class="n">mycephfs2</span>
</pre></div>
</div>
<p>CephFS subdirectories can be mounted using the <code class="docutils literal notranslate"><span class="pre">--root-path</span></code> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">dokan</span> <span class="o">-</span><span class="n">l</span> <span class="n">y</span> <span class="o">--</span><span class="n">root</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">a</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">--removable</span></code> flags are set, the mounts will show up in the
<code class="docutils literal notranslate"><span class="pre">Get-Volume</span></code> results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>PS C:\&gt; Get-Volume -FriendlyName &quot;Ceph*&quot; | `
        Select-Object -Property @(&quot;DriveLetter&quot;, &quot;Filesystem&quot;, &quot;FilesystemLabel&quot;)

DriveLetter Filesystem FilesystemLabel
----------- ---------- ---------------
          Z Ceph       Ceph
          W Ceph       Ceph - new_fs
</pre></div>
</div>
<p>Please use <code class="docutils literal notranslate"><span class="pre">ceph-dokan</span> <span class="pre">--help</span></code> for a full list of arguments.</p>
</section>
<section id="credentials">
<h3>Credentials<a class="headerlink" href="#credentials" title="Permalink to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">--id</span></code> option passes the name of the CephX user whose keyring we intend to
use for mounting CephFS. The following commands are equivalent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">dokan</span> <span class="o">--</span><span class="nb">id</span> <span class="n">foo</span> <span class="o">-</span><span class="n">l</span> <span class="n">x</span>
<span class="n">ceph</span><span class="o">-</span><span class="n">dokan</span> <span class="o">--</span><span class="n">name</span> <span class="n">client</span><span class="o">.</span><span class="n">foo</span> <span class="o">-</span><span class="n">l</span> <span class="n">x</span>
</pre></div>
</div>
</section>
<section id="unmounting-filesystems">
<h3>Unmounting filesystems<a class="headerlink" href="#unmounting-filesystems" title="Permalink to this heading">¶</a></h3>
<p>The mount can be removed by either issuing ctrl-c or using the unmap command,
like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">dokan</span><span class="o">.</span><span class="n">exe</span> <span class="n">unmap</span> <span class="o">-</span><span class="n">l</span> <span class="n">x</span>
</pre></div>
</div>
<p>Note that when unmapping Ceph filesystems, the exact same mountpoint argument
must be used as when the mapping was created.</p>
</section>
<section id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Permalink to this heading">¶</a></h3>
<p>Be aware that Windows ACLs are ignored. Posix ACLs are supported but cannot be
modified using the current CLI. In the future, we may add some command actions
to change file ownership or permissions.</p>
<p>Another thing to note is that cephfs doesn’t support mandatory file locks, which
Windows is heavily rely upon. At the moment, we’re letting Dokan handle file
locks, which are only enforced locally.</p>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">rbd-wnbd</span></code>, <code class="docutils literal notranslate"><span class="pre">ceph-dokan</span></code> doesn’t currently provide a <code class="docutils literal notranslate"><span class="pre">service</span></code>
command. In order for the cephfs mount to survive host reboots, consider using
<code class="docutils literal notranslate"><span class="pre">NSSM</span></code>.</p>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading">¶</a></h2>
<p>Please consult the <a class="reference external" href="../../install/windows-troubleshooting">Windows troubleshooting</a> page.</p>
</section>
</section>



            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Intro to Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installing Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephadm/">Cephadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph Storage Cluster</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph File System</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../#getting-started-with-cephfs">Getting Started with CephFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#administration">Administration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../#mounting-cephfs">Mounting CephFS</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../client-config-ref/"> Client Configuration Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../client-auth/"> Client Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mount-prerequisites/"> Mount CephFS: Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mount-using-kernel-driver/"> Mount CephFS using Kernel Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mount-using-fuse/"> Mount CephFS using FUSE</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"> Mount CephFS on Windows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#mounting-filesystems">Mounting filesystems</a></li>
<li class="toctree-l5"><a class="reference internal" href="#credentials">Credentials</a></li>
<li class="toctree-l5"><a class="reference internal" href="#unmounting-filesystems">Unmounting filesystems</a></li>
<li class="toctree-l5"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cephfs-shell/"> Use the CephFS Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kernel-features/"> Supported Features of Kernel Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../man/8/ceph-fuse/"> Manual: ceph-fuse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../man/8/mount.ceph/"> Manual: mount.ceph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../man/8/mount.fuse.ceph/"> Manual: mount.fuse.ceph</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../#cephfs-concepts">CephFS Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#troubleshooting-and-disaster-recovery">Troubleshooting and Disaster Recovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#developer-guides">Developer Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#additional-details">Additional Details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/">Ceph Block Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph Object Gateway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/">Ceph Manager Daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/dashboard/">Ceph Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/developer_guide/">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/internals/">Ceph Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../governance/">Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../foundation/">Ceph Foundation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/general/">Ceph Releases (general)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/">Ceph Releases (index)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../cephfs-shell/" title="CephFS Shell"
             >next</a> |</li>
        <li class="right" >
          <a href="../mount-using-fuse/" title="Mount CephFS using FUSE"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph File System</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Mount CephFS on Windows</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>