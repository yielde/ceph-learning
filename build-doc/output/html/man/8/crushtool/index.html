
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>crushtool – CRUSH map manipulation tool &#8212; Ceph Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="librados-config – display information about librados" href="../librados-config/" />
    <link rel="prev" title="ceph-syn – ceph synthetic workload generator" href="../ceph-syn/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../librados-config/" title="librados-config – display information about librados"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../ceph-syn/" title="ceph-syn – ceph synthetic workload generator"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../rados/" >Ceph Storage Cluster</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../rados/man/" accesskey="U">Object Store Manpages</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">crushtool – CRUSH map manipulation tool</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div id="docubetter" align="right" style="padding: 15px; font-weight: bold;">
    <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <section id="crushtool-crush-map-manipulation-tool">
<h1>crushtool – CRUSH map manipulation tool<a class="headerlink" href="#crushtool-crush-map-manipulation-tool" title="Permalink to this heading">¶</a></h1>
<section id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line"><strong>crushtool</strong> ( -d <em>map</em> | -c <em>map.txt</em> | –build –num_osds <em>numosds</em>
<em>layer1</em> <em>…</em> | –test ) [ -o <em>outfile</em> ]</div>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p><strong>crushtool</strong> is a utility that lets you create, compile, decompile
and test CRUSH map files.</p>
<p>CRUSH is a pseudo-random data distribution algorithm that efficiently
maps input values (which, in the context of Ceph, correspond to Placement
Groups) across a heterogeneous, hierarchically structured device map.
The algorithm was originally described in detail in the following paper
(although it has evolved some since then):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">ssrc</span><span class="o">.</span><span class="n">ucsc</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">Papers</span><span class="o">/</span><span class="n">weil</span><span class="o">-</span><span class="n">sc06</span><span class="o">.</span><span class="n">pdf</span>
</pre></div>
</div>
<p>The tool has four modes of operation.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-compile-c">
<span class="sig-name descname"><span class="pre">--compile|-c</span></span><span class="sig-prename descclassname"> <span class="pre">map.txt</span></span><a class="headerlink" href="#cmdoption-crushtool-compile-c" title="Permalink to this definition">¶</a></dt>
<dd><p>will compile a plaintext map.txt into a binary map file.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-decompile-d">
<span class="sig-name descname"><span class="pre">--decompile|-d</span></span><span class="sig-prename descclassname"> <span class="pre">map</span></span><a class="headerlink" href="#cmdoption-crushtool-decompile-d" title="Permalink to this definition">¶</a></dt>
<dd><p>will take the compiled map and decompile it into a plaintext source
file, suitable for editing.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-build">
<span class="sig-name descname"><span class="pre">--build</span></span><span class="sig-prename descclassname"> <span class="pre">--num_osds</span> <span class="pre">{num-osds}</span> <span class="pre">layer1</span> <span class="pre">...</span></span><a class="headerlink" href="#cmdoption-crushtool-build" title="Permalink to this definition">¶</a></dt>
<dd><p>will create map with the given layer structure. See below for a
detailed explanation.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-test">
<span class="sig-name descname"><span class="pre">--test</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-crushtool-test" title="Permalink to this definition">¶</a></dt>
<dd><p>will perform a dry run of a CRUSH mapping for a range of input
values <code class="docutils literal notranslate"><span class="pre">[--min-x,--max-x]</span></code> (default <code class="docutils literal notranslate"><span class="pre">[0,1023]</span></code>) which can be
thought of as simulated Placement Groups. See below for a more
detailed explanation.</p>
</dd></dl>

<p>Unlike other Ceph tools, <strong>crushtool</strong> does not accept generic options
such as <strong>–debug-crush</strong> from the command line. They can, however, be
provided via the CEPH_ARGS environment variable. For instance, to
silence all output from the CRUSH subsystem:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CEPH_ARGS</span><span class="o">=</span><span class="s2">&quot;--debug-crush 0&quot;</span> <span class="n">crushtool</span> <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="running-tests-with-test">
<h2>Running tests with –test<a class="headerlink" href="#running-tests-with-test" title="Permalink to this heading">¶</a></h2>
<p>The test mode will use the input crush map ( as specified with <strong>-i
map</strong> ) and perform a dry run of CRUSH mapping or random placement
(if <strong>–simulate</strong> is set ). On completion, two kinds of reports can be
created.
1) The <strong>–show-…</strong> option outputs human readable information
on stderr.
2) The <strong>–output-csv</strong> option creates CSV files that are
documented by the <strong>–help-output</strong> option.</p>
<p>Note: Each Placement Group (PG) has an integer ID which can be obtained
from <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">pg</span> <span class="pre">dump</span></code> (for example PG 2.2f means pool id 2, PG id 32).
The pool and PG IDs are combined by a function to get a value which is
given to CRUSH to map it to OSDs. crushtool does not know about PGs or
pools; it only runs simulations by mapping values in the range
<code class="docutils literal notranslate"><span class="pre">[--min-x,--max-x]</span></code>.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-show-statistics">
<span class="sig-name descname"><span class="pre">--show-statistics</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-crushtool-show-statistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays a summary of the distribution. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="mi">1</span> <span class="p">(</span><span class="n">metadata</span><span class="p">)</span> <span class="n">num_rep</span> <span class="mi">5</span> <span class="n">result</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>    <span class="mi">1024</span><span class="o">/</span><span class="mi">1024</span>
</pre></div>
</div>
<p>shows that rule <strong>1</strong> which is named <strong>metadata</strong> successfully
mapped <strong>1024</strong> values to <strong>result size == 5</strong> devices when trying
to map them to <strong>num_rep 5</strong> replicas. When it fails to provide the
required mapping, presumably because the number of <strong>tries</strong> must
be increased, a breakdown of the failures is displayed. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="mi">1</span> <span class="p">(</span><span class="n">metadata</span><span class="p">)</span> <span class="n">num_rep</span> <span class="mi">10</span> <span class="n">result</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>   <span class="mi">4</span><span class="o">/</span><span class="mi">1024</span>
<span class="n">rule</span> <span class="mi">1</span> <span class="p">(</span><span class="n">metadata</span><span class="p">)</span> <span class="n">num_rep</span> <span class="mi">10</span> <span class="n">result</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>   <span class="mi">93</span><span class="o">/</span><span class="mi">1024</span>
<span class="n">rule</span> <span class="mi">1</span> <span class="p">(</span><span class="n">metadata</span><span class="p">)</span> <span class="n">num_rep</span> <span class="mi">10</span> <span class="n">result</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="mi">927</span><span class="o">/</span><span class="mi">1024</span>
</pre></div>
</div>
<p>shows that although <strong>num_rep 10</strong> replicas were required, <strong>4</strong>
out of <strong>1024</strong> values ( <strong>4/1024</strong> ) were mapped to <strong>result size
== 8</strong> devices only.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-show-mappings">
<span class="sig-name descname"><span class="pre">--show-mappings</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-crushtool-show-mappings" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the mapping of each value in the range <code class="docutils literal notranslate"><span class="pre">[--min-x,--max-x]</span></code>.
For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CRUSH</span> <span class="n">rule</span> <span class="mi">1</span> <span class="n">x</span> <span class="mi">24</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p>shows that value <strong>24</strong> is mapped to devices <strong>[11,6]</strong> by rule
<strong>1</strong>.</p>
<p>One of the following is required when using the <code class="docutils literal notranslate"><span class="pre">--show-mappings</span></code> option:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--num-rep</span></code></p></li>
<li><p>both <code class="docutils literal notranslate"><span class="pre">--min-rep</span></code> and <code class="docutils literal notranslate"><span class="pre">--max-rep</span></code></p></li>
</ol>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">--num-rep</span></code> stands for “number of replicas, indicates the number of
replicas in a pool, and is used to specify an exact number of replicas (for
example <code class="docutils literal notranslate"><span class="pre">--num-rep</span> <span class="pre">5</span></code>). <code class="docutils literal notranslate"><span class="pre">--min-rep</span></code> and <code class="docutils literal notranslate"><span class="pre">--max-rep</span></code> are used together
to specify a range of replicas (for example, <code class="docutils literal notranslate"><span class="pre">--min-rep</span> <span class="pre">1</span> <span class="pre">--max-rep</span> <span class="pre">10</span></code>).</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-show-bad-mappings">
<span class="sig-name descname"><span class="pre">--show-bad-mappings</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-crushtool-show-bad-mappings" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays which value failed to be mapped to the required number of
devices. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bad</span> <span class="n">mapping</span> <span class="n">rule</span> <span class="mi">1</span> <span class="n">x</span> <span class="mi">781</span> <span class="n">num_rep</span> <span class="mi">7</span> <span class="n">result</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
<p>shows that when rule <strong>1</strong> was required to map <strong>7</strong> devices, it
could map only six : <strong>[8,10,2,11,6,9]</strong>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-show-utilization">
<span class="sig-name descname"><span class="pre">--show-utilization</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-crushtool-show-utilization" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the expected and actual utilization for each device, for
each number of replicas. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="mi">0</span><span class="p">:</span> <span class="n">stored</span> <span class="p">:</span> <span class="mi">951</span>      <span class="n">expected</span> <span class="p">:</span> <span class="mf">853.333</span>
<span class="n">device</span> <span class="mi">1</span><span class="p">:</span> <span class="n">stored</span> <span class="p">:</span> <span class="mi">963</span>      <span class="n">expected</span> <span class="p">:</span> <span class="mf">853.333</span>
<span class="o">...</span>
</pre></div>
</div>
<p>shows that device <strong>0</strong> stored <strong>951</strong> values and was expected to store <strong>853</strong>.
Implies <strong>–show-statistics</strong>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-show-utilization-all">
<span class="sig-name descname"><span class="pre">--show-utilization-all</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-crushtool-show-utilization-all" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the same as <strong>–show-utilization</strong> but does not suppress
output when the weight of a device is zero.
Implies <strong>–show-statistics</strong>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-show-choose-tries">
<span class="sig-name descname"><span class="pre">--show-choose-tries</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-crushtool-show-choose-tries" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays how many attempts were needed to find a device mapping.
For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">:</span>     <span class="mi">95224</span>
<span class="mi">1</span><span class="p">:</span>      <span class="mi">3745</span>
<span class="mi">2</span><span class="p">:</span>      <span class="mi">2225</span>
<span class="o">..</span>
</pre></div>
</div>
<p>shows that <strong>95224</strong> mappings succeeded without retries, <strong>3745</strong>
mappings succeeded with one attempts, etc. There are as many rows
as the value of the <strong>–set-choose-total-tries</strong> option.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-output-csv">
<span class="sig-name descname"><span class="pre">--output-csv</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-crushtool-output-csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates CSV files (in the current directory) containing information
documented by <strong>–help-output</strong>. The files are named after the rule
used when collecting the statistics. For instance, if the rule
: ‘metadata’ is used, the CSV files will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metadata</span><span class="o">-</span><span class="n">absolute_weights</span><span class="o">.</span><span class="n">csv</span>
<span class="n">metadata</span><span class="o">-</span><span class="n">device_utilization</span><span class="o">.</span><span class="n">csv</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The first line of the file shortly explains the column layout. For
instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metadata</span><span class="o">-</span><span class="n">absolute_weights</span><span class="o">.</span><span class="n">csv</span>
<span class="n">Device</span> <span class="n">ID</span><span class="p">,</span> <span class="n">Absolute</span> <span class="n">Weight</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
<span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-crushtool-output-name">
<span class="sig-name descname"><span class="pre">--output-name</span></span><span class="sig-prename descclassname"> <span class="pre">NAME</span></span><a class="headerlink" href="#cmdoption-crushtool-output-name" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepend <strong>NAME</strong> to the file names generated when <strong>–output-csv</strong>
is specified. For instance <strong>–output-name FOO</strong> will create
files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FOO</span><span class="o">-</span><span class="n">metadata</span><span class="o">-</span><span class="n">absolute_weights</span><span class="o">.</span><span class="n">csv</span>
<span class="n">FOO</span><span class="o">-</span><span class="n">metadata</span><span class="o">-</span><span class="n">device_utilization</span><span class="o">.</span><span class="n">csv</span>
<span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<p>The <strong>–set-…</strong> options can be used to modify the tunables of the
input crush map. The input crush map is modified in
memory. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ crushtool -i mymap --test --show-bad-mappings
bad mapping rule 1 x 781 num_rep 7 result [8,10,2,11,6,9]
</pre></div>
</div>
<p>could be fixed by increasing the <strong>choose-total-tries</strong> as follows:</p>
<blockquote>
<div><dl class="simple">
<dt>$ crushtool -i mymap –test </dt><dd><p>–show-bad-mappings –set-choose-total-tries 500</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="building-a-map-with-build">
<h2>Building a map with –build<a class="headerlink" href="#building-a-map-with-build" title="Permalink to this heading">¶</a></h2>
<p>The build mode will generate hierarchical maps. The first argument
specifies the number of devices (leaves) in the CRUSH hierarchy. Each
layer describes how the layer (or devices) preceding it should be
grouped.</p>
<p>Each layer consists of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bucket</span> <span class="p">(</span> <span class="n">uniform</span> <span class="o">|</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">tree</span> <span class="o">|</span> <span class="n">straw</span> <span class="o">|</span> <span class="n">straw2</span> <span class="p">)</span> <span class="n">size</span>
</pre></div>
</div>
<p>The <strong>bucket</strong> is the type of the buckets in the layer
(e.g. “rack”). Each bucket name will be built by appending a unique
number to the <strong>bucket</strong> string (e.g. “rack0”, “rack1”…).</p>
<p>The second component is the type of bucket: <strong>straw</strong> should be used
most of the time.</p>
<p>The third component is the maximum size of the bucket. A size of zero
means a bucket of infinite capacity.</p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h2>
<p>Suppose we have two rows with two racks each and 20 nodes per rack. Suppose
each node contains 4 storage devices for Ceph OSD Daemons. This configuration
allows us to deploy 320 Ceph OSD Daemons. Lets assume a 42U rack with 2U nodes,
leaving an extra 2U for a rack switch.</p>
<p>To reflect our hierarchy of devices, nodes, racks and rows, we would execute
the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ crushtool -o crushmap --build --num_osds 320 \
       node straw 4 \
       rack straw 20 \
       row straw 2 \
       root straw 0
# id        weight  type name       reweight
-87 320     root root
-85 160             row row0
-81 80                      rack rack0
-1  4                               node node0
0   1                                       osd.0   1
1   1                                       osd.1   1
2   1                                       osd.2   1
3   1                                       osd.3   1
-2  4                               node node1
4   1                                       osd.4   1
5   1                                       osd.5   1
...
</pre></div>
</div>
<p>CRUSH rules are created so the generated crushmap can be
tested. They are the same rules as the ones created by default when
creating a new Ceph cluster. They can be further edited with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># decompile</span>
<span class="n">crushtool</span> <span class="o">-</span><span class="n">d</span> <span class="n">crushmap</span> <span class="o">-</span><span class="n">o</span> <span class="nb">map</span><span class="o">.</span><span class="n">txt</span>

<span class="c1"># edit</span>
<span class="n">emacs</span> <span class="nb">map</span><span class="o">.</span><span class="n">txt</span>

<span class="c1"># recompile</span>
<span class="n">crushtool</span> <span class="o">-</span><span class="n">c</span> <span class="nb">map</span><span class="o">.</span><span class="n">txt</span> <span class="o">-</span><span class="n">o</span> <span class="n">crushmap</span>
</pre></div>
</div>
</section>
<section id="reclassify">
<h2>Reclassify<a class="headerlink" href="#reclassify" title="Permalink to this heading">¶</a></h2>
<p>The <em>reclassify</em> function allows users to transition from older maps that
maintain parallel hierarchies for OSDs of different types to a modern CRUSH
map that makes use of the <em>device class</em> feature.  For more information,
see <a class="reference external" href="https://docs.ceph.com/en/latest/rados/operations/crush-map-edits/#migrating-from-a-legacy-ssd-rule-to-device-classes">https://docs.ceph.com/en/latest/rados/operations/crush-map-edits/#migrating-from-a-legacy-ssd-rule-to-device-classes</a>.</p>
</section>
<section id="example-output-from-test">
<h2>Example output from –test<a class="headerlink" href="#example-output-from-test" title="Permalink to this heading">¶</a></h2>
<p>See <a class="reference external" href="https://github.com/ceph/ceph/blob/master/src/test/cli/crushtool/set-choose.t">https://github.com/ceph/ceph/blob/master/src/test/cli/crushtool/set-choose.t</a>
for sample <code class="docutils literal notranslate"><span class="pre">crushtool</span> <span class="pre">--test</span></code> commands and output produced thereby.</p>
</section>
<section id="availability">
<h2>Availability<a class="headerlink" href="#availability" title="Permalink to this heading">¶</a></h2>
<p><strong>crushtool</strong> is part of Ceph, a massively scalable, open-source, distributed storage system. Please
refer to the Ceph documentation at <a class="reference external" href="http://ceph.com/docs">http://ceph.com/docs</a> for more
information.</p>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h2>
<p><a class="reference internal" href="../ceph/"><span class="doc">ceph</span></a>(8),
<a class="reference internal" href="../osdmaptool/"><span class="doc">osdmaptool</span></a>(8),</p>
</section>
<section id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this heading">¶</a></h2>
<p>John Wilkins, Sage Weil, Loic Dachary</p>
</section>
</section>



            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../">
              <img class="logo" src="../../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../start/intro/">Intro to Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/">Installing Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephadm/">Cephadm</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../rados/">Ceph Storage Cluster</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../rados/configuration/">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cephadm/">Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rados/operations/">Operations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../rados/man/">Man Pages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ceph-volume/">ceph-volume – Ceph OSD deployment and inspection tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-volume-systemd/">ceph-volume-systemd – systemd ceph-volume helper tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph/">ceph – ceph administration tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-authtool/">ceph-authtool – ceph keyring manipulation tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-clsinfo/">ceph-clsinfo – show class object information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-conf/">ceph-conf – ceph conf file tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-debugpack/">ceph-debugpack – ceph debug packer utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-dencoder/">ceph-dencoder – ceph encoder/decoder utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-mon/">ceph-mon – ceph monitor daemon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-osd/">ceph-osd – ceph object storage daemon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-kvstore-tool/">ceph-kvstore-tool – ceph kvstore manipulation tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-run/">ceph-run – restart daemon on core dump</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-syn/">ceph-syn – ceph synthetic workload generator</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">crushtool – CRUSH map manipulation tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-tests-with-test">Running tests with –test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-a-map-with-build">Building a map with –build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reclassify">Reclassify</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-output-from-test">Example output from –test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#availability">Availability</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See also</a></li>
<li class="toctree-l4"><a class="reference internal" href="#authors">Authors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../librados-config/">librados-config – display information about librados</a></li>
<li class="toctree-l3"><a class="reference internal" href="../monmaptool/">monmaptool – ceph monitor cluster map manipulation tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../osdmaptool/">osdmaptool – ceph osd cluster map manipulation tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rados/">rados – rados object storage utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-post-file/">ceph-post-file – post files for ceph developers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../rados/troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rados/api/">APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephfs/">Ceph File System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rbd/">Ceph Block Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../radosgw/">Ceph Object Gateway</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/">Ceph Manager Daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/dashboard/">Ceph Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/developer_guide/">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/internals/">Ceph Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../governance/">Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../foundation/">Ceph Foundation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/general/">Ceph Releases (general)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.ceph.com/en/latest/releases/">Ceph Releases (index)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/">Glossary</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../http-routingtable/" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../librados-config/" title="librados-config – display information about librados"
             >next</a> |</li>
        <li class="right" >
          <a href="../ceph-syn/" title="ceph-syn – ceph synthetic workload generator"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../rados/" >Ceph Storage Cluster</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../rados/man/" >Object Store Manpages</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">crushtool – CRUSH map manipulation tool</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>